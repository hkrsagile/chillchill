<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORE HUB</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        [x-cloak] { display: none !important; }
        body { background-color: #F5F5F7; font-family: sans-serif; }
        .apple-card { background: white; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .control-btn { background: #E5E5E7; width: 60px; height: 60px; border-radius: 15px; font-size: 24px; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body x-data="app()">

    <nav class="p-6 flex justify-between items-center max-w-4xl mx-auto">
        <div class="text-2xl font-bold tracking-tighter" @click="screen = 'menu'">CORE.HUB</div>
        <button @click="loginAdmin()" class="text-[10px] text-gray-400 uppercase">Admin</button>
    </nav>

    <main class="max-w-xl mx-auto p-4">
        
        <div x-show="screen === 'menu'">
            <h1 class="text-3xl font-bold text-center my-8">æŒ‘æˆ°é ˜å–çè³</h1>
            <div class="grid gap-6">
                <div @click="startGame('quiz')" class="apple-card p-8 text-center cursor-pointer hover:bg-gray-50">
                    <span class="text-4xl">ğŸ“</span>
                    <h2 class="text-xl font-bold mt-2">æ™ºèƒ½å•ç­”</h2>
                </div>
                <div @click="startGame('snake')" class="apple-card p-8 text-center cursor-pointer hover:bg-gray-50">
                    <span class="text-4xl">ğŸ</span>
                    <h2 class="text-xl font-bold mt-2">ç¶“å…¸é£Ÿè›‡</h2>
                </div>
            </div>
        </div>

        <div x-show="screen === 'snake'" x-cloak class="apple-card p-6 flex flex-col items-center">
            <div class="flex justify-between w-full mb-4">
                <button @click="screen = 'menu'">â† è¿”å›</button>
                <div class="font-bold text-yellow-600">åˆ†æ•¸: <span x-text="score"></span></div>
            </div>
            <canvas id="snakeCanvas" width="300" height="300" class="border bg-white"></canvas>
            
            <div class="mt-6 grid grid-cols-3 gap-2 md:hidden">
                <div class="col-start-2"><button @click="changeDir(0,-1)" class="control-btn">â†‘</button></div>
                <div class="col-start-1"><button @click="changeDir(-1,0)" class="control-btn">â†</button></div>
                <div class="col-start-2"><button @click="changeDir(0,1)" class="control-btn">â†“</button></div>
                <div class="col-start-3"><button @click="changeDir(1,0)" class="control-btn">â†’</button></div>
            </div>
        </div>

        <div x-show="screen === 'quiz'" x-cloak class="apple-card p-8">
            <h2 class="text-2xl font-bold mb-6 text-center" x-text="quizData[currentQuizIdx].q"></h2>
            <div class="grid gap-4">
                <template x-for="(opt, idx) in quizData[currentQuizIdx].options" :key="idx">
                    <button @click="handleQuiz(idx)" class="w-full p-4 border rounded-xl hover:bg-gray-100" x-text="opt"></button>
                </template>
            </div>
        </div>

        <div x-show="screen === 'claim'" x-cloak class="apple-card p-10 text-center">
            <h2 class="text-2xl font-bold mb-4">ğŸ† æ­å–œé”æ¨™ï¼</h2>
            <p class="text-gray-500 mb-6 text-sm">è«‹è¼¸å…¥é›»éƒµé ˜å–ç¦®å“</p>
            <input type="email" x-model="emailInput" placeholder="your@email.com" class="w-full p-4 bg-gray-100 rounded-xl mb-4">
            <button @click="submitClaim()" class="w-full bg-yellow-600 text-white py-4 rounded-xl font-bold">ç¢ºèªé ˜å–</button>
        </div>

        <div x-show="screen === 'admin'" x-cloak class="apple-card p-8">
            <div class="flex justify-between mb-4 border-b pb-2">
                <h2 class="font-bold">é ˜çæ¸…å–®</h2>
                <button @click="screen = 'menu'" class="text-sm">é—œé–‰</button>
            </div>
            <div class="max-h-64 overflow-auto">
                <template x-for="(item, idx) in claims">
                    <div class="flex justify-between py-2 border-b text-sm">
                        <span x-text="item.email"></span>
                        <button @click="claims.splice(idx,1); localStorage.setItem('my_data', JSON.stringify(claims))" class="text-red-500">åˆªé™¤</button>
                    </div>
                </template>
            </div>
        </div>

    </main>

    <script>
        function app() {
            return {
                screen: 'menu', score: 0, currentQuizIdx: 0, emailInput: '',
                claims: JSON.parse(localStorage.getItem('my_data') || '[]'),
                dx: 1, dy: 0,
                quizData: [
                    { q: "Apple è¨­è¨ˆç”±èª°ä¸»å°éï¼Ÿ", options: ["Jony Ive", "Elon Musk"], correct: 0 },
                    { q: "é€™æ˜¯ä»€éº¼ç³»çµ±ï¼Ÿ", options: ["CRM", "Game"], correct: 0 }
                ],
                startGame(type) {
                    this.score = 0; this.currentQuizIdx = 0; this.screen = type;
                    if(type === 'snake') {
                        this.dx = 1; this.dy = 0;
                        setTimeout(() => this.initSnake(), 200);
                    }
                },
                changeDir(x, y) { this.dx = x; this.dy = y; },
                handleQuiz(idx) {
                    if(idx === this.quizData[this.currentQuizIdx].correct) {
                        this.score += 25;
                        if(this.currentQuizIdx < this.quizData.length - 1) this.currentQuizIdx++;
                        else this.screen = 'claim';
                    } else { alert('ç­”éŒ¯äº†ï¼'); }
                },
                submitClaim() {
                    if(!this.emailInput.includes('@')) return alert('Email ç„¡æ•ˆ');
                    this.claims.push({ email: this.emailInput });
                    localStorage.setItem('my_data', JSON.stringify(this.claims));
                    alert('æäº¤æˆåŠŸï¼');
                    this.screen = 'menu';
                },
                loginAdmin() {
                    let pw = prompt('å¯†ç¢¼:');
                    if(pw === 'admin2026') { this.screen = 'admin'; }
                    else if(pw !== null) { alert('å¯†ç¢¼éŒ¯èª¤ï¼'); }
                },
                initSnake() {
                    const canvas = document.getElementById('snakeCanvas');
                    const ctx = canvas.getContext('2d');
                    let snake = [{x: 10, y: 10}];
                    let food = {x: 5, y: 5};
                    
                    window.onkeydown = (e) => {
                        if(e.key === 'ArrowUp') this.changeDir(0, -1);
                        if(e.key === 'ArrowDown') this.changeDir(0, 1);
                        if(e.key === 'ArrowLeft') this.changeDir(-1, 0);
                        if(e.key === 'ArrowRight') this.changeDir(1, 0);
                    };

                    const loop = setInterval(() => {
                        if(this.screen !== 'snake') return clearInterval(loop);
                        const head = { x: snake[0].x + this.dx, y: snake[0].y + this.dy };
                        
                        if(head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20) {
                            clearInterval(loop);
                            if(this.score >= 50) this.screen = 'claim';
                            else { alert('éŠæˆ²çµæŸï¼Œåˆ†æ•¸: ' + this.score); this.screen = 'menu'; }
                            return;
                        }

                        snake.unshift(head);
                        if(head.x === food.x && head.y === food.y) {
                            this.score += 10;
                            food = { x: Math.floor(Math.random()*20), y: Math.floor(Math.random()*20) };
                        } else { snake.pop(); }

                        ctx.clearRect(0,0,300,300);
                        ctx.fillStyle = '#C3B091';
                        snake.forEach(p => ctx.fillRect(p.x*15, p.y*15, 14, 14));
                        ctx.fillStyle = '#D4AF37';
                        ctx.fillRect(food.x*15, food.y*15, 14, 14);
                    }, 150);
                }
            }
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CORE HUB | Gamified CRM</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        [x-cloak] { display: none !important; }
        body { font-family: 'Inter', sans-serif; background-color: #F5F5F7; color: #1D1D1F; overflow-x: hidden; }
        .apple-card { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px); border-radius: 22px; transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        .btn-gold { background: #D4AF37; color: white; }
        .btn-earth { background: #C3B091; color: white; }
        canvas { background: #fff; border-radius: 12px; touch-action: none; border: 1px solid #eee; }
        .control-btn { background: #E5E5E7; width: 60px; height: 60px; border-radius: 15px; display: flex; items-center; justify-center; font-weight: bold; }
    </style>
</head>
<body x-data="app()" class="antialiased min-h-screen">

    <nav class="max-w-6xl mx-auto p-6 flex justify-between items-center">
        <div class="text-2xl font-semibold tracking-tighter cursor-pointer" @click="screen = 'menu'">CORE<span class="text-[#D4AF37]">.HUB</span></div>
        <button @click="loginAdmin()" class="text-[10px] text-gray-400 uppercase tracking-widest hover:text-gray-900">Systems Access</button>
    </nav>

    <main class="max-w-4xl mx-auto p-4">
        
        <div x-show="screen === 'menu'" class="space-y-12">
            <div class="text-center py-10">
                <h1 class="text-5xl font-bold tracking-tight mb-4 text-[#1D1D1F]">é¸æ“‡ä½ çš„æŒ‘æˆ°</h1>
                <p class="text-gray-400 text-lg">é”åˆ° 50 åˆ†å³å¯ç²å¾—å°ˆå±¬ç¦®é‡</p>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-2xl mx-auto">
                <div class="apple-card p-8 text-center flex flex-col items-center shadow-sm">
                    <div class="text-4xl mb-4">ğŸ“</div>
                    <h3 class="text-xl font-bold mb-2">æ™ºèƒ½å•ç­”</h3>
                    <p class="text-gray-400 text-sm mb-6">æ¸¬è©¦ä½ çš„å°ˆæ¥­æ•éŠ³åº¦</p>
                    <button @click="startGame('quiz')" class="w-full py-3 rounded-xl font-semibold btn-earth">ç«‹å³é–‹å§‹</button>
                </div>
                <div class="apple-card p-8 text-center flex flex-col items-center shadow-sm">
                    <div class="text-4xl mb-4">ğŸ</div>
                    <h3 class="text-xl font-bold mb-2">ç¶“å…¸é£Ÿè›‡</h3>
                    <p class="text-gray-400 text-sm mb-6">æ¥µè‡´ç©ºé–“çš„æ“æ§æ„Ÿ</p>
                    <button @click="startGame('snake')" class="w-full py-3 rounded-xl font-semibold btn-gold">ç«‹å³é–‹å§‹</button>
                </div>
            </div>
        </div>

        <div x-show="screen === 'quiz'" x-cloak class="apple-card p-8 md:p-12 max-w-md mx-auto">
            <div class="flex justify-between mb-8 text-xs text-gray-400 uppercase tracking-widest">
                <span x-text="'Question ' + (currentQuizIdx + 1)"></span>
                <span x-text="'Score: ' + score"></span>
            </div>
            <h2 class="text-2xl font-bold mb-8" x-text="quizData[currentQuizIdx].q"></h2>
            <div class="grid gap-4">
                <template x-for="(opt, idx) in quizData[currentQuizIdx].options" :key="idx">
                    <button @click="handleQuiz(idx)" class="w-full p-4 text-left border border-gray-100 rounded-2xl hover:bg-gray-50 hover:border-[#C3B091] transition-all" x-text="opt"></button>
                </template>
            </div>
        </div>

        <div x-show="screen === 'snake'" x-cloak class="apple-card p-6 flex flex-col items-center">
            <div class="w-full flex justify-between mb-4 px-4">
                <button @click="screen = 'menu'" class="text-sm text-gray-400">é€€å‡º</button>
                <div class="font-bold text-[#D4AF37]">Score: <span x-text="score"></span></div>
            </div>
            <canvas id="snakeCanvas" width="300" height="300"></canvas>
            
            <div class="mt-8 grid grid-cols-3 gap-3 md:hidden">
                <div class="col-start-2"><button @click="setDir(0,-1)" class="control-btn">â†‘</button></div>
                <div class="col-start-1"><button @click="setDir(-1,0)" class="control-btn">â†</button></div>
                <div class="col-start-2"><button @click="setDir(0,1)" class="control-btn">â†“</button></div>
                <div class="col-start-3"><button @click="setDir(1,0)" class="control-btn">â†’</button></div>
            </div>
        </div>

        <div x-show="screen === 'claim'" x-cloak class="max-w-md mx-auto apple-card p-10 text-center space-y-8">
            <div class="text-6xl">ğŸ</div>
            <h2 class="text-3xl font-bold">æ­å–œé”æ¨™ï¼</h2>
            <p class="text-gray-500 text-sm">çå“å°‡æ–¼ 2 å€‹å·¥ä½œå¤©å…§ç™¼é€åˆ°é›»å­éƒµç®±</p>
            <input type="email" x-model="emailInput" placeholder="example@mail.com" class="w-full p-4 bg-[#F5F5F7] rounded-2xl outline-none border focus:border-[#C3B091]">
            <button @click="submitClaim()" class="w-full btn-gold py-4 rounded-2xl font-bold">ç¢ºèªé ˜å–</button>
        </div>

        <div x-show="screen === 'admin'" x-cloak class="apple-card p-8">
            <div class="flex justify-between items-center mb-8">
                <h2 class="text-xl font-bold uppercase tracking-widest">CRM Admin</h2>
                <button @click="screen = 'menu'" class="text-xs underline">Back</button>
            </div>
            <table class="w-full text-left text-sm">
                <tr class="text-gray-400 border-b"><th class="py-4 font-normal">Email</th><th class="py-4 font-normal text-right">Action</th></tr>
                <template x-for="(item, idx) in claims" :key="idx">
                    <tr class="border-b">
                        <td class="py-4 font-medium" x-text="item.email"></td>
                        <td class="py-4 text-right"><button @click="removeClaim(idx)" class="text-red-400 text-xs">åˆªé™¤</button></td>
                    </tr>
                </template>
            </table>
        </div>

    </main>

    <script>
        function app() {
            return {
                screen: 'menu',
                score: 0,
                currentQuizIdx: 0,
                emailInput: '',
                claims: JSON.parse(localStorage.getItem('my_crm_data') || '[]'),
                quizData: [
                    { q: "Apple çš„æ¥µç°¡è¨­è¨ˆé¢¨æ ¼æºè‡ªï¼Ÿ", options: ["åŒ…æµ©æ–¯ (Bauhaus)", "æ³¢æ™®è—è¡“", "è¶…ç¾å¯¦ä¸»ç¾©"], correct: 0 },
                    { q: "æœ¬å°ˆæ¡ˆçš„äº”è¡Œã€é‡‘ã€è‰²èª¿æ˜¯ï¼Ÿ", options: ["äº®è—è‰²", "é¦™æª³é‡‘", "è‰ç¶ è‰²"], correct: 1 }
                ],
                startGame(type) {
                    this.score = 0;
                    this.currentQuizIdx = 0;
                    this.screen = type;
                    if(type === 'snake') this.$nextTick(() => this.initSnake());
                },
                handleQuiz(idx) {
                    if(idx === this.quizData[this.currentQuizIdx].correct) {
                        this.score += 25;
                        if(this.currentQuizIdx < this.quizData.length - 1) {
                            this.currentQuizIdx++;
                        } else {
                            this.checkWin();
                        }
                    } else {
                        alert('ç­”éŒ¯äº†ï¼Œè«‹å†è©¦è©¦ï¼');
                    }
                },
                checkWin() {
                    if(this.score >= 50) this.screen = 'claim';
                    else { alert('åˆ†æ•¸ä¸è¶³ï¼Œå†æ¥å†å²ï¼'); this.screen = 'menu'; }
                },
                submitClaim() {
                    if(!this.emailInput.includes('@')) return alert('è«‹è¼¸å…¥æœ‰æ•ˆ Email');
                    this.claims.push({ email: this.emailInput, date: new Date().toLocaleDateString() });
                    localStorage.setItem('my_crm_data', JSON.stringify(this.claims));
                    alert('æäº¤æˆåŠŸï¼');
                    this.screen = 'menu';
                },
                loginAdmin() {
                    if(prompt('Password:') === 'admin2026') this.screen = 'admin';
                },
                removeClaim(idx) {
                    this.claims.splice(idx, 1);
                    localStorage.setItem('my_crm_data', JSON.stringify(this.claims));
                },
                // Snake Logic
                snakeDir: {x: 1, y: 0},
                setDir(x, y) { this.snakeDir = {x, y}; },
                initSnake() {
                    const canvas = document.getElementById('snakeCanvas');
                    const ctx = canvas.getContext('2d');
                    let snake = [{x: 10, y: 10}];
                    let food = {x: 5, y: 5};
                    this.snakeDir = {x: 1, y: 0};
                    
                    const gameLoop = setInterval(() => {
                        if(this.screen !== 'snake') return clearInterval(gameLoop);
                        
                        const head = { x: snake[0].x + this.snakeDir.x, y: snake[0].y + this.snakeDir.y };
                        
                        // ç¢°æ’æª¢æŸ¥
                        if(head.x < 0 || head.x >= 20 || head.y < 0 || head.y >= 20) {
                            clearInterval(gameLoop);
                            this.checkWin();
                            return;
                        }

                        snake.unshift(head);
                        if(head.x === food.x && head.y === food.y) {
                            this.score += 10;
                            food = { x: Math.floor(Math.random()*20), y: Math.floor(Math.random()*20) };
                        } else {
                            snake.pop();
                        }

                        // ç¹ªåœ–
                        ctx.clearRect(0,0,300,300);
                        ctx.fillStyle = '#C3B091';
                        snake.forEach(p => ctx.fillRect(p.x*15, p.y*15, 14, 14));
                        ctx.fillStyle = '#D4AF37';
                        ctx.fillRect(food.x*15, food.y*15, 14, 14);
                    }, 150);
                }
            }
        }
    </script>
</body>
</html>
